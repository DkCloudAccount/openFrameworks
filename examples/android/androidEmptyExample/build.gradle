// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle-experimental:0.7.0-alpha1'
    }
}

allprojects {
    repositories {
        jcenter()
    }
}

apply plugin: 'com.android.model.application'

model {
    android {
        compileSdkVersion = 23
        buildToolsVersion = "23.0.2"

        defaultConfig.with {
            minSdkVersion.apiLevel    = 9
            targetSdkVersion.apiLevel = 23
            versionCode     =  1
            versionName     = "1.0"
        }
    }

    android.ndk {
        moduleName = "native"
        cppFlags.addAll(["-std=c++11"
        //                 "-I${file("src/native_app_glue")}".toString()
        //                 "-I${file("src/main/jni")}".toString(),
        //                 "-I${file("src/main/jni/data")}".toString()]
                         ])
        ldLibs.addAll(["android", "atomic", "EGL", "GLESv2", "OpenSLES", "log"])
        stl        = "c++_static"
    }

    android.sources {
        main {
            manifest.source {
                srcDir '.'
                include 'AndroidManifest.xml'
            }
            res.source.srcDirs = ['res']
            jni {
                source {
                    srcDir 'src'
                }
                dependencies {
                    project ":openFrameworksProject"
                }
            }
        }
    }

    android.lintOptions {
        abortOnError  = false
    }

    android.buildTypes {
        release {
            minifyEnabled = false
        }
    }

    android.productFlavors {
        create ("arm7") {
            ndk.abiFilters.add("armeabi-v7a")
        }
       /* create ("arm8") {
            ndk.abiFilters.add("arm64-v8a")
        }*/
        create ("x86") {
            ndk.abiFilters.add("x86")
        }
        // for detailed abiFilter descriptions, refer to "Supported ABIs" @
        // https://developer.android.com/ndk/guides/abis.html#sa

        // build one including all cpu architectures
       //create("all")
    }
}
